<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Katsuya Yamaguchi</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- OGPメタタグ (SNS共有用) -->
  <meta property="og:title" content="Katsuya Yamaguchi Official Portfolio" />
  <meta property="og:description" content="山口克彌　ポートフォリオサイト" />
  <meta property="og:image" content="https://wrenchsun.github.io/asset/img/KatsuyaYamaguchi.png" />
  <meta property="og:url" content="https://wrenchsun.github.io/" />
  <meta property="og:type" content="website" />
  <!--.cssファイルのロード-->
  <link rel="stylesheet" href="style.css" />
  <!-- Deviconsのロード -->
  <link rel="stylesheet" type='text/css' href="https://cdn.jsdelivr.net/gh/devicons/devicon@latest/devicon.min.css" />
  <!-- ファビコンの設定 -->
  <link rel="shortcut icon" href="asset/img/DramEngineIcon.ico">
</head>

<body>

<!-- END #youtubeModal -->
<div id="video-modal">
  <button id="close-modal">×</button>
  <!-- embed/の後に再生する動画リンク -->
  <iframe
    src="https://www.youtube.com/embed/CaNSxWC6kFU?si=NhPg88NBcyRkglVM?autoplay=1&mute=1"
    frameborder="0"
    allow="autoplay; encrypted-media"
    allowfullscreen>
  </iframe>
</div>

<!-- ===== ヘッダー ===== -->
<header>
  <div class="logo-area">
    <div class="logo">Katsuya Yamaguchi</div>
    <!-- GoogleDriveのロゴ,リンク,ツールチップ -->
    <a class="logo-link" href="https://drive.google.com/drive/folders/1LKXhJuYHIpJOLASiD1QrtgS-926t7Cmm?usp=sharing" 
    aria-label="作品GoogleDriveへ↗" title="作品GoogleDriveへ↗" target="_blank" rel="noopener noreferrer">
      <svg class="logo-icon" fill="#4285f4" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.01 1.485c-2.082 0-3.754.02-3.743.047.01.02 1.708 3.001 3.774 6.62l3.76 6.574h3.76c2.081 0 3.753-.02 3.742-.047-.005-.02-1.708-3.001-3.775-6.62l-3.76-6.574zm-4.76 1.73a789.828 789.861 0 0 0-3.63 6.319L0 15.868l1.89 3.298 1.885 3.297 3.62-6.335 3.618-6.33-1.88-3.287C8.1 4.704 7.255 3.22 7.25 3.214zm2.259 12.653-.203.348c-.114.198-.96 1.672-1.88 3.287a423.93 423.948 0 0 1-1.698 2.97c-.01.026 3.24.042 7.222.042h7.244l1.796-3.157c.992-1.734 1.85-3.23 1.906-3.323l.104-.167h-7.249z"/></svg>
    </a>

    <!-- GitHubのロゴ,リンク,ツールチップ -->
    <a class="logo-link" href="https://github.com/wrenchsun" 
    aria-label="個人GitHubへ↗" title="個人GitHubへ↗" target="_blank" rel="noopener noreferrer">
      <i class="devicon-github-original"></i>
    </a>

  </div>
  <!-- ヘッダーメニュー -->
  <nav class="header-nav">
    <a href="#top-video">TOP</a>
    <a href="#about">ABOUT</a>
    <a href="#works">WORKS</a>
    <a href="#career">CAREER</a>
    <a href="#contact">CONTACT</a>
  </nav>
</header>
<!-- ===== メイン ===== -->
<!-- デモ動画(自動再生) -->
<main>
<section id="top-video">
  <div class="video-wrap">
    <video
      src="asset/video/demo.mp4"
      autoplay
      muted
      loop
      playsinline
    ></video>
  </div>
</section>

<section id="about">
  <h2>ABOUT</h2>
  <div class="about-container">
    <div class="about-content">
      <h3>Katsuya Yamaguchi</h3>
      <myname>山口 克彌</myname>
      <explanation>
        HAL大阪ゲーム4年生学科3年 プログラマー<br>
        テクニカルアーティスト志望<br>
        <a href="https://drive.google.com/file/d/1k7Nhfc7lP4j2i3Czve-Xsj6pCcn5FqQ7/view?usp=sharing" 
        target="_blank" rel="noopener noreferrer">自己紹介動画へ↗</a>
      </explanation>
      <br>
      <h3>言語</h3>
      <skillIcon>
        <i class="devicon-c-plain" title="C言語"></i>
        <i class="devicon-cplusplus-plain" title="C++言語"></i>
        <i class="devicon-csharp-plain" title="C#言語"></i>
      </skillIcon>
      <skillStr>
        HLSL<br>
        <span title="Houdiniで使用されるプロシージャル言語">VEX(学習中)</span><br>
      </skillStr>

      <h3>ツール</h3>
      <skillIcon>
        <i class="devicon-visualstudio-plain" title="Visual Studio2022"></i>
        <i class="devicon-unrealengine-original" title="Unreal Engine"></i>
        <i class="devicon-unity-plain" title="Unity"></i>
        <i class="devicon-git-plain" title="Git"></i>
        <i class="devicon-github-original" title="GitHub"></i>
        <i class="devicon-photoshop-plain" title="Adobe Photoshop"></i>
        <i class="devicon-houdini-original" title="Houdini 学習中"></i>
      </skillIcon>
      <skillStr>
        DirectX 12<br>
        PIX<br>
        RenderDoc<br>
      </skillStr>

      <h3>資格</h3>
      <skillStr>
        普通自動車第一種免許<br>
        基本情報技術者<br>
        CGエンジニア検定　エキスパート<br>
        CGクリエイター検定　エキスパート<br>
      </skillStr>

      <h3> 受賞歴</h3>
      <skillStr>
        2019 第21回福岡県工業高等学校ロボット競技大会 優勝<br>
        2019 第27回全国高等学校ロボット競技大会 全国5位 技術奨励賞<br>
        2021 第18回高校生技術・アイディアコンテスト全国大会 佳作受賞<br>
        2021 第29回全国高等学校ロボット競技大会 優秀賞 技術奨励賞<br>
        2022 大阪府職業能力開発協会会長賞<br>
        2023 おもしろゲームづくり学内コンテスト 技術力賞<br>
        2024 ＨＡＬ ＥＶＥＮＴ ＷＥＥＫ 銅賞<br>
      </skillStr>

      <h3>アーティストにとって最強のサポーターになる</h3>
      <explanation>
        技術不足によって実現できませんなんて言わせない<br>
        アーティストの求めるものを120%実現するために<br>
        最大限バックアップしてこれまでにない作品を<br>
        作り上げるサポートをする
      </explanation>
      
      <!-- 企業別カスタムコンテンツ -->
      <custom_content id="custom-content"></custom_content>
      <br>
      <iframe src="https://www.docswell.com/slide/513PE2/embed?key=portfolio" allowfullscreen="true" class="docswell-iframe" width="620" height="349" style="border: 1px solid #ccc; display: block; margin: 0px auto; padding: 0px; aspect-ratio: 620/349;"></iframe>

    </div>
    <div class="about-image" id="parallax-image">
      <img src="asset/img/KatsuyaYamaguchi.png" alt="Katsuya Yamaguchi" />
    </div>
  </div>
</section>

<section id="works">
  <h2>WORKS</h2>
  <explanation>タイトル、サムネイルクリックで詳細が出ます。</explanation>
  <div class="works-container" id="works-container">
    <!-- JavaScriptで自動生成 -->
  </div>
</section>

<section id="career">
  <h2>CAREER</h2>
  <ul>
    <li>2023 ○○大学 入学</li>
    <li>2024 インターン参加</li>
  </ul>
</section>

<section id="contact">
  <h2>CONTACT</h2>
  <p><a href="mailto:yamaguchi1013katuya@gmail.com">yamaguchi1013katuya@gmail.com</a></p>
</section>

</main>

<!-- ===== フッター ===== -->
<footer>
  <div class="footer-content">
    <div class="footer-section">
      <h4>Katsuya Yamaguchi</h4>
      <p>ポートフォリオサイト</p>
      <p><a href="mailto:yamaguchi1013katuya@gmail.com">yamaguchi1013katuya@gmail.com</a></p>
    </div>
    
    <div class="footer-section">
      <h4>Links</h4>
      <ul>
        <li><a href="https://github.com/wrenchsun" target="_blank" rel="noopener noreferrer">GitHub</a></li>
        <li><a href="https://drive.google.com/drive/folders/1LKXhJuYHIpJOLASiD1QrtgS-926t7Cmm?usp=sharing" target="_blank" rel="noopener noreferrer">Google Drive</a></li>
      </ul>
    </div>
    
    <div class="footer-section">
      <h4>Credits</h4>
      <ul>
        <li><a href="https://devicon.dev/" target="_blank" rel="noopener noreferrer">Devicon</a> - Icon Library</li>
        <li><a href="https://simpleicons.org/" target="_blank" rel="noopener noreferrer">Simple Icons</a> - SVG Icons</li>
      </ul>
    </div>
  </div>
  
  <div class="footer-bottom">
    <p>&copy; 2026 Katsuya Yamaguchi. All rights reserved.</p>
    <p class="footer-license">Icons licensed under <a href="https://creativecommons.org/publicdomain/zero/1.0/" target="_blank" rel="noopener noreferrer">CC0 1.0</a> and <a href="https://opensource.org/licenses/MIT" target="_blank" rel="noopener noreferrer">MIT License</a></p>
  </div>
</footer>

<!-- ===== JavaScript ===== -->
<script>
/* モーダル制御 */
const modal = document.getElementById("video-modal");
document.getElementById("close-modal").onclick = () => {
  modal.style.display = "none";
};

/* メニューの滑らかスクロール */
const headerLinks = document.querySelectorAll(".header-nav a");
headerLinks.forEach((link) => {
  link.addEventListener("click", (event) => {
    const targetId = link.getAttribute("href");
    if (!targetId || !targetId.startsWith("#")) {
      return;
    }

    event.preventDefault();

    const target = document.querySelector(targetId);
    if (target) {
      target.scrollIntoView({ behavior: "smooth" });
    }
  });
});

/* セクション見出しの固定スタイル切り替え */
const sections = document.querySelectorAll("section[id]");
const h2Elements = document.querySelectorAll("section[id] > h2");

window.addEventListener("scroll", () => {
  let activeSection = null;

  for (let section of sections) {
    const rect = section.getBoundingClientRect();
    if (rect.top <= 100) {
      activeSection = section;
    }
  }

  h2Elements.forEach((h2) => {
    if (activeSection && activeSection.querySelector("h2") === h2) {
      h2.classList.add("sticky");
    } else {
      h2.classList.remove("sticky");
    }
  });
});

/* パララックス効果 */
const parallaxImage = document.getElementById("parallax-image");
const aboutSection = document.getElementById("about");
const worksSection = document.getElementById("works");

window.addEventListener("scroll", () => {
  const aboutRect = aboutSection.getBoundingClientRect();
  const worksRect = worksSection.getBoundingClientRect();
  
  // 自己紹介セクションの開始から作品セクションの開始までの範囲内
  if (aboutRect.top < window.innerHeight && worksRect.top > 0) {
    // 0-1の範囲で進捗度を計算（0=自己紹介の開始、1=作品の開始）
    const progress = 1 - (worksRect.top / window.innerHeight);
    const clampedProgress = Math.max(0, Math.min(1, progress));
    
    // -50px から +50px の範囲で上下に移動
    const offset = (clampedProgress - 0.5) * 100;
    parallaxImage.style.transform = `translateY(${offset}px)`;
  }
});

/* クエリパラメータで企業別コンテンツ読み込み */
const params = new URLSearchParams(window.location.search);
const company = params.get("id");

function getYouTubeEmbedUrl(value) {
  if (!value) {
    return "";
  }

  if (value.includes("youtube.com/embed/")) {
    return value;
  }

  if (value.includes("youtube.com/watch")) {
    const url = new URL(value);
    const videoId = url.searchParams.get("v");
    return videoId ? `https://www.youtube.com/embed/${videoId}` : "";
  }

  if (value.includes("youtu.be/")) {
    const videoId = value.split("youtu.be/")[1]?.split("?")[0];
    return videoId ? `https://www.youtube.com/embed/${videoId}` : "";
  }

  return `https://www.youtube.com/embed/${value}`;
}

async function loadCustomContent() {
  const contentDiv = document.getElementById("custom-content");
  
  // パラメータがある場合は対応するHTMLを探す、ない場合はcommon.html
  const fileName = company ? `${company}.html` : 'common.html';
  const filePath = `asset/html/${fileName}`;
  
  try {
    const response = await fetch(filePath);
    
    // ファイルが見つからない場合はcommon.htmlにフォールバック
    if (!response.ok) {
      const fallbackResponse = await fetch('asset/html/common.html');
      const html = await fallbackResponse.text();
      contentDiv.innerHTML = html;
      return;
    }
    
    const html = await response.text();
    contentDiv.innerHTML = html;
  } catch (error) {
    console.error('コンテンツの読み込みに失敗しました:', error);
    // エラー時もcommon.htmlを表示
    try {
      const fallbackResponse = await fetch('asset/html/common.html');
      const html = await fallbackResponse.text();
      contentDiv.innerHTML = html;
    } catch (fallbackError) {
      contentDiv.innerHTML = '<p style="padding: 20px; color: #aaa;">コンテンツの読み込みに失敗しました。</p>';
    }
  }
}

/* 作品の自動読み込み */
async function loadWorks() {
  const container = document.getElementById("works-container");
  
  try {
    const response = await fetch('asset/data/works.json');
    const works = await response.json();
    
    works.forEach(work => {
      const workDiv = document.createElement('div');
      workDiv.className = 'works';
      
      const videoSrc = getYouTubeEmbedUrl(work.youtubeUrl || work.videoId);
      
      // ヘッダー部分（タイトル + Driveリンク）
      let headerHTML = '<div class="works-header"><h3 class="works-title" role="button" tabindex="0">' + work.title + '</h3>';
      if (work.driveUrl) {
        headerHTML += '<a class="logo-link" href="' + work.driveUrl + '" aria-label="作品GoogleDriveへ↗" title="作品GoogleDriveへ↗" target="_blank" rel="noopener noreferrer">';
        headerHTML += '<svg class="logo-icon" fill="#4285f4" role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12.01 1.485c-2.082 0-3.754.02-3.743.047.01.02 1.708 3.001 3.774 6.62l3.76 6.574h3.76c2.081 0 3.753-.02 3.742-.047-.005-.02-1.708-3.001-3.775-6.62l-3.76-6.574zm-4.76 1.73a789.828 789.861 0 0 0-3.63 6.319L0 15.868l1.89 3.298 1.885 3.297 3.62-6.335 3.618-6.33-1.88-3.287C8.1 4.704 7.255 3.22 7.25 3.214zm2.259 12.653-.203.348c-.114.198-.96 1.672-1.88 3.287a423.93 423.948 0 0 1-1.698 2.97c-.01.026 3.24.042 7.222.042h7.244l1.796-3.157c.992-1.734 1.85-3.23 1.906-3.323l.104-.167h-7.249z"/></svg>';
        headerHTML += '</a>';
      }
      headerHTML += '</div>';

      // サムネイルと概要を確認
      const hasThumbnail = work.thumbnailUrl && work.thumbnailUrl.trim() !== '';
      const hasSummary = work.summary && work.summary.trim() !== '';
      const hasPreview = hasThumbnail || hasSummary;

      const thumbnailHTML = hasThumbnail
        ? '<img class="works-thumb" src="' + work.thumbnailUrl + '" alt="' + work.title + ' サムネイル">'
        : '';

      const summaryHTML = hasSummary
        ? '<p class="works-summary">' + work.summary + '</p>'
        : '';

      const videoHTML = videoSrc
        ? '<iframe src="' + videoSrc + '" frameborder="0" allowfullscreen></iframe>'
        : '';

      const docswellHTML = work.docswellUrl
        ? '<iframe class="docswell-iframe" src="' + work.docswellUrl + '" allowfullscreen="true"></iframe>'
        : '';

      const previewHTML = hasPreview
        ? '<div class="works-preview">' + thumbnailHTML + summaryHTML + '</div>'
        : '';
      
      const detailsHTML = '<div class="works-details"><div class="works-details-left">' + videoHTML + docswellHTML +
        '</div><div class="works-details-right"><p class="works-description">' + (work.description || '') + '</p></div></div>';
      
      workDiv.innerHTML = headerHTML + previewHTML + detailsHTML;

      // プレビューがない場合は自動的に展開状態に
      if (!hasPreview) {
        workDiv.classList.add('is-expanded');
      }

      const titleEl = workDiv.querySelector('.works-title');
      const thumbEl = workDiv.querySelector('.works-thumb');
      
      const toggleExpanded = () => {
        workDiv.classList.toggle('is-expanded');
        if (workDiv.classList.contains('is-expanded')) {
          workDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
      };

      if (titleEl) {
        titleEl.addEventListener('click', toggleExpanded);
        titleEl.addEventListener('keydown', (event) => {
          if (event.key === 'Enter' || event.key === ' ') {
            event.preventDefault();
            toggleExpanded();
          }
        });
      }

      if (thumbEl) {
        thumbEl.addEventListener('click', toggleExpanded);
      }
      
      container.appendChild(workDiv);
    });
  } catch (error) {
    console.error('作品の読み込みに失敗しました:', error);
    container.innerHTML = '<p style="padding: 20px; color: #aaa;">作品の読み込みに失敗しました。</p>';
  }
}

// ページ読み込み時に実行
loadCustomContent();
loadWorks();
</script>

</body>
</html>
